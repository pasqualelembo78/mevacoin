
---

‚úÖ 1. CREA da zero una chiave ellittica GPG (modalit√† expert)

Lancia:

gpg --full-generate-key --expert

Poi scegli:

1Ô∏è‚É£ (9) ECC and ECC
2Ô∏è‚É£ (1) Curve 25519
3Ô∏è‚É£ Conferma SC (sign + certify)
4Ô∏è‚É£ Imposta validit√†: 0 = never expires
5Ô∏è‚É£ Nome: mevacoin
6Ô∏è‚É£ Email: 
7Ô∏è‚É£ Commento: lascia vuoto
8Ô∏è‚É£ Conferma (O)kay
9Ô∏è‚É£ Metti la passphrase (la useremo come password API)

üëâ Questa passphrase sar√† LA password da usare su tutto il sistema.


---

üìå IMPORTANTE

La passphrase della chiave GPG NON DEVE essere troppo lunga o complessa, altrimenti wallet-api non la accetta.

Usa, ad esempio:

Pass0@

O quella che vuoi ma breve e semplice.


---

‚úÖ 2. Estrai l‚ÄôID della chiave

gpg --list-keys

Troverai una riga simile:

pub   ed25519 2025-11-22 [SC]
      ABCDEF1234567890ABCDEF1234567890ABCDEF12

Copiati l‚ÄôID (esempio: ABCDEF1234567890ABCDEF1234567890ABCDEF12).


---

‚úÖ 3. Salva la password API (la passphrase della chiave) in un file protetto

echo "Pass0@" > /etc/mevacoin/api.key
chmod 600 /etc/mevacoin/api.key

(Sostituisci la password con quella scelta durante la creazione della chiave.)

Volendo puoi anche generare una pass complicatissima con il comando openssl rand -hex 32  
QUINDI O METTI UNA TUA PASS ALL'INTERNO DEL FILE API.KEY OPPURE LA GENERI CON OPENSSL 
---

Alla fine meglio cryptare con 
gpg --output /etc/mevacoin/keys/server1.key.gpg \
    --encrypt --recipient key ottenuta con gpg \
    /root/server1.key

üîê PERCH√â METTERLA IN UN FILE?

Sia wallet-api sia api.php la leggeranno da qui, garantendo lo stesso valore e evitando errori umani.


---

‚úÖ 4. CONFIGURA wallet-api per usare questa password

Lancia:

PASS=$(cat /etc/mevacoin/api.key)

screen -DmS wallet-api ./wallet-api \
  --port 8070 \
  --rpc-bind-ip 0.0.0.0 \
  --enable-cors "*" \
  --rpc-password "$PASS"

Ora wallet-api accetta solo richieste con quella password.


---

‚úÖ 5. Configura api.php per usare la stessa password

Nel tuo api.php, metti:

$api_key = trim(file_get_contents("/etc/mevacoin/api.key"));

Poi aggiungi a ogni chiamata curl:

'X-API-KEY: ' . $api_key,


---

üéØ RISULTATO FINALE

Ora hai:

‚úî Una sola chiave ellittica GPG creata correttamente
‚úî Una singola password (la passphrase) usata ovunque
‚úî wallet-api avviato con quella password
‚úî api.php che usa la stessa password per autenticarsi
‚úî Sicurezza pulita, semplice e coerente
‚úî Niente chiavi duplicate
‚úî Niente confusione tra GPG e RPC
