
---

âœ… 1. CREA da zero una chiave ellittica GPG (modalitÃ  expert)

Lancia:

gpg --full-generate-key --expert

Poi scegli:

1ï¸âƒ£ (9) ECC and ECC
2ï¸âƒ£ (1) Curve 25519
3ï¸âƒ£ Conferma SC (sign + certify)
4ï¸âƒ£ Imposta validitÃ : 0 = never expires
5ï¸âƒ£ Nome: mevacoin
6ï¸âƒ£ Email: 
7ï¸âƒ£ Commento: lascia vuoto
8ï¸âƒ£ Conferma (O)kay
9ï¸âƒ£ Metti la passphrase (la useremo come password API)

ğŸ‘‰ Questa passphrase sarÃ  LA password da usare su tutto il sistema.


---

ğŸ“Œ IMPORTANTE

La passphrase della chiave GPG NON DEVE essere troppo lunga o complessa, altrimenti wallet-api non la accetta.

Usa, ad esempio:

Pass0@

O quella che vuoi ma breve e semplice.


---

âœ… 2. Estrai lâ€™ID della chiave

gpg --list-keys

Troverai una riga simile:

pub   ed25519 2025-11-22 [SC]
      ABCDEF1234567890ABCDEF1234567890ABCDEF12

Copiati lâ€™ID (esempio: ABCDEF1234567890ABCDEF1234567890ABCDEF12).


---

âœ… 3. Salva la password API (la passphrase della chiave) in un file protetto

echo "Pass0@" > /etc/mevacoin/api.key
chmod 600 /etc/mevacoin/api.key

(Sostituisci la password con quella scelta durante la creazione della chiave.)


---

ğŸ” PERCHÃ‰ METTERLA IN UN FILE?

Sia wallet-api sia api.php la leggeranno da qui, garantendo lo stesso valore e evitando errori umani.


---

âœ… 4. CONFIGURA wallet-api per usare questa password

Lancia:

PASS=$(cat /etc/mevacoin/api.key)

screen -DmS wallet-api ./wallet-api \
  --port 8070 \
  --rpc-bind-ip 0.0.0.0 \
  --enable-cors "*" \
  --rpc-password "$PASS"

Ora wallet-api accetta solo richieste con quella password.


---

âœ… 5. Configura api.php per usare la stessa password

Nel tuo api.php, metti:

$api_key = trim(file_get_contents("/etc/mevacoin/api.key"));

Poi aggiungi a ogni chiamata curl:

'X-API-KEY: ' . $api_key,


---

ğŸ¯ RISULTATO FINALE

Ora hai:

âœ” Una sola chiave ellittica GPG creata correttamente
âœ” Una singola password (la passphrase) usata ovunque
âœ” wallet-api avviato con quella password
âœ” api.php che usa la stessa password per autenticarsi
âœ” Sicurezza pulita, semplice e coerente
âœ” Niente chiavi duplicate
âœ” Niente confusione tra GPG e RPC
